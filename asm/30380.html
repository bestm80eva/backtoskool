<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Back to Skool: Routine at 30380</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../microsphere.css" />
<link rel="stylesheet" type="text/css" href="../skool.css" />
<link rel="stylesheet" type="text/css" href="../bts.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="30292.html">30292</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#30380">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="30532.html">30532</a></span></td>
</tr>
</table>
<div class="description">30380: Control the flight of a catapult pellet</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
The address of this uninterruptible subcommand routine is placed into bytes 17 and 18 of a catapult pellet's buffer by the routine at <a class="link" href="30555.html">30555</a>. It controls the pellet from the beginning of its flight to the end, including any collisions with cups, trees, other characters, and teachers' heads.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">213 (BOY WANDER's pellet) or 214 (ERIC's pellet)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30380"></a>30380</td>
<td class="instruction">LD L,19</td>
<td class="comment-11" rowspan="1">Byte 19 of the pellet's buffer holds the distance left to travel</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30382"></a>30382</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-11" rowspan="1">Has the pellet finished travelling?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30383"></a>30383</td>
<td class="instruction">JP Z,<a class="link" href="29896.html#29903">29903</a></td>
<td class="comment-11" rowspan="1">Terminate the pellet if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30386"></a>30386</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=distance left to travel</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30387"></a>30387</td>
<td class="instruction">CP 5</td>
<td class="comment-11" rowspan="1">Does the pellet have fewer than 5 spaces left to travel?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30389"></a>30389</td>
<td class="instruction">JR C,30413</td>
<td class="comment-11" rowspan="1">Jump if so (to check for hittable obstacles)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30391"></a>
<div class="comments">
<div class="paragraph">
The pellet is merrily wending its way through the air. It's not ready to hit anything vulnerable yet, or has simply failed to do so. The only thing that can stop it at the moment is a wall, door or window.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30391"></a>30391</td>
<td class="instruction">LD L,0</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at byte 0 of the pellet's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30393"></a>30393</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=pellet's animatory state</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30394"></a>30394</td>
<td class="instruction">RLCA</td>
<td class="comment-11" rowspan="2">Set the carry flag if the pellet is travelling to the left</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30395"></a>30395</td>
<td class="instruction">CCF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30396"></a>30396</td>
<td class="instruction">SBC A,A</td>
<td class="comment-11" rowspan="3"><span class="register">A</span>=-1 if the pellet is travelling leftwards, 1 if rightwards</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30397"></a>30397</td>
<td class="instruction">ADD A,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30398"></a>30398</td>
<td class="instruction">INC A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30399"></a>30399</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="2">Add the pellet's x-coordinate to obtain that of the location directly in front of the pellet</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30400"></a>30400</td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30401"></a>30401</td>
<td class="instruction">LD E,A</td>
<td class="comment-11" rowspan="1">Store this in <span class="register">E</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30402"></a>30402</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=2</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30403"></a>30403</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=pellet's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30404"></a>30404</td>
<td class="instruction">CALL <a class="link" href="30292.html">30292</a></td>
<td class="comment-11" rowspan="1">Check for closed doors, windows and walls in the pellet's path</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30407"></a>30407</td>
<td class="instruction">JP C,<a class="link" href="29896.html#29903">29903</a></td>
<td class="comment-11" rowspan="1">Terminate the pellet if there is one</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30410"></a>30410</td>
<td class="instruction">JP <a class="link" href="29194.html#29264">29264</a></td>
<td class="comment-11" rowspan="1">Otherwise just advance the pellet one space</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30413"></a>
<div class="comments">
<div class="paragraph">
The pellet is ready to hit a vulnerable character, cup or tree.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30413"></a>30413</td>
<td class="instruction">CALL <a class="link" href="30229.html">30229</a></td>
<td class="comment-11" rowspan="1">Has the pellet hit a water- or sherry-filled cup?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30416"></a>30416</td>
<td class="instruction">JR NZ,30435</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30418"></a>
<div class="comments">
<div class="paragraph">
The pellet has hit a water- or sherry-filled cup, or a conker in the tree. The <span class="register">A</span> register holds the animatory state of the object (drop of water/sherry, or conker) that the pellet will become.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30418"></a>30418</td>
<td class="instruction">LD L,18</td>
<td class="comment-11" rowspan="4">Place the address of the uninterruptible subcommand routine at <a class="link" href="29896.html">29896</a> into bytes 17 and 18 of the catapult pellet's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30420"></a>30420</td>
<td class="instruction">LD (HL),116</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30422"></a>30422</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30423"></a>30423</td>
<td class="instruction">LD (HL),200</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30425"></a>30425</td>
<td class="instruction">PUSH AF</td>
<td class="comment-11" rowspan="1">Save the new animatory state of the transmuted pellet</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30426"></a>30426</td>
<td class="instruction">CALL <a class="link" href="25012.html">25012</a></td>
<td class="comment-11" rowspan="1">Update the SRB for the pellet's current location</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30429"></a>30429</td>
<td class="instruction">POP AF</td>
<td class="comment-11" rowspan="1">Restore the transmuted pellet's animatory state to <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30430"></a>30430</td>
<td class="instruction">DEC D</td>
<td class="comment-11" rowspan="2">The projectile will ascend two levels</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30431"></a>30431</td>
<td class="instruction">DEC D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30432"></a>30432</td>
<td class="instruction">JP <a class="link" href="24880.html">24880</a></td>
<td class="comment-11" rowspan="1">Update the projectile's location and update the SRB</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30435"></a>
<div class="comments">
<div class="paragraph">
The pellet hasn't hit a water- or sherry-filled cup. Has it hit a teacher?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30435"></a>30435</td>
<td class="instruction">LD L,1</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at byte 1 of the pellet's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30437"></a>30437</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">E</span>=pellet's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30438"></a>30438</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=2</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30439"></a>30439</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=pellet's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30440"></a>30440</td>
<td class="instruction">LD B,5</td>
<td class="comment-11" rowspan="1">There are 5 teachers who can be hit by a pellet</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30442"></a>30442</td>
<td class="instruction">CALL <a class="link" href="29856.html#29858">29858</a></td>
<td class="comment-11" rowspan="1">Has the pellet hit any of these teachers?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30445"></a>30445</td>
<td class="instruction">JR NZ,30491</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30447"></a>30447</td>
<td class="instruction">LD C,0</td>
<td class="comment-11" rowspan="1">Point <span class="register">BC</span> at byte 0 of the stricken teacher's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30449"></a>30449</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=animatory state of this teacher</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30450"></a>30450</td>
<td class="instruction">AND 7</td>
<td class="comment-11" rowspan="2">Is the teacher already sitting on the floor?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30452"></a>30452</td>
<td class="instruction">CP 6</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30454"></a>30454</td>
<td class="instruction">JR NZ,30482</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30456"></a>30456</td>
<td class="instruction">LD L,19</td>
<td class="comment-11" rowspan="2">Place 6 into byte 19 of the pellet's buffer (the distance the pellet will travel after bouncing off the teacher's head)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30458"></a>30458</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30459"></a>
<div class="comments">
<div class="paragraph">
This section of code controls the pellet's motion on its ascent from the teacher's head.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30459"></a>30459</td>
<td class="instruction">LD L,19</td>
<td class="comment-11" rowspan="1">Byte 19 of the pellet's buffer holds the distance left to travel</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30461"></a>30461</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-11" rowspan="1">Decrement this</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30462"></a>30462</td>
<td class="instruction">JP Z,<a class="link" href="29896.html#29903">29903</a></td>
<td class="comment-11" rowspan="1">Terminate the pellet if its journey is over</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30465"></a>30465</td>
<td class="instruction">CALL <a class="link" href="30229.html">30229</a></td>
<td class="comment-11" rowspan="1">Has the pellet hit a water- or sherry-filled cup?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30468"></a>30468</td>
<td class="instruction">JR Z,30418</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30470"></a>30470</td>
<td class="instruction">CALL <a class="link" href="25012.html">25012</a></td>
<td class="comment-11" rowspan="1">Update the SRB for the pellet's current location</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30473"></a>30473</td>
<td class="instruction">DEC D</td>
<td class="comment-11" rowspan="1">Has the pellet hit the ceiling on the top floor?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30474"></a>30474</td>
<td class="instruction">JR NZ,30477</td>
<td class="comment-11" rowspan="1">Jump if not (having raised the pellet one level)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30476"></a>30476</td>
<td class="instruction">INC D</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=1; this makes the pellet hover just below the ceiling on the top floor before disappearing, which is a <a class="link" href="../reference/bugs.html#pelletHover">bug</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30477"></a>30477</td>
<td class="instruction">CALL <a class="link" href="30534.html">30534</a></td>
<td class="comment-11" rowspan="1">Replace the address of this routine in bytes 17 and 18 of the pellet's buffer with <a class="link" href="30380.html#30480">30480</a> (the address of the next instruction)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30480"></a>30480</td>
<td class="instruction">JR 30459</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30482"></a>
<div class="comments">
<div class="paragraph">
The pellet has hit a teacher who's standing up.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30482"></a>30482</td>
<td class="instruction">LD C,18</td>
<td class="comment-11" rowspan="1">Point <span class="register">BC</span> at byte 18 of the teacher's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30484"></a>30484</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=MSB of a routine address, or 0</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30485"></a>30485</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30486"></a>30486</td>
<td class="instruction">AND A</td>
<td class="comment-11" rowspan="1">Is there an uninterruptible subcommand routine address in bytes 17 and 18 of the teacher's buffer?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30487"></a>30487</td>
<td class="instruction">JP Z,<a class="link" href="29896.html#29983">29983</a></td>
<td class="comment-11" rowspan="1">Jump if not (this teacher can be knocked over)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30490"></a>30490</td>
<td class="instruction">POP BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30491"></a>
<div class="comments">
<div class="paragraph">
The pellet hasn't hit any liquid-containing cups or vulnerable teachers. Has it hit any kids?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30491"></a>30491</td>
<td class="instruction">LD D,206</td>
<td class="comment-11" rowspan="1">206=BOY WANDER</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30493"></a>30493</td>
<td class="instruction">LD B,5</td>
<td class="comment-11" rowspan="1">There are 5 kids who can be knocked over</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30495"></a>30495</td>
<td class="instruction">CALL <a class="link" href="27820.html">27820</a></td>
<td class="comment-11" rowspan="1">Has the pellet hit any of them?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30498"></a>30498</td>
<td class="instruction">JP NC,<a class="link" href="30786.html">30786</a></td>
<td class="comment-11" rowspan="1">Knock them down if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30501"></a>
<div class="comments">
<div class="paragraph">
The pellet hasn't hit any liquid-containing cups, teachers or kids. Has it hit a conker in the tree?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30501"></a>30501</td>
<td class="instruction">LD L,19</td>
<td class="comment-11" rowspan="1">Byte 19 of the pellet's buffer holds the distance left to travel</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30503"></a>30503</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick this up in <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30504"></a>30504</td>
<td class="instruction">DEC A</td>
<td class="comment-11" rowspan="1">Is there only one space left to travel?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30505"></a>30505</td>
<td class="instruction">JP Z,30391</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30508"></a>30508</td>
<td class="instruction">LD L,2</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at byte 2 of the pellet's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30510"></a>30510</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=pellet's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30511"></a>30511</td>
<td class="instruction">CP 4</td>
<td class="comment-11" rowspan="1">Was the pellet fired on the top floor?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30513"></a>30513</td>
<td class="instruction">JR NC,30524</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30515"></a>30515</td>
<td class="instruction">DEC L</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=1</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30516"></a>30516</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=pellet's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30517"></a>30517</td>
<td class="instruction">CP 128</td>
<td class="comment-11" rowspan="2">Jump if the pellet is to the right of the tree (it was fired in the girls' skool)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30519"></a>30519</td>
<td class="instruction">JR NC,30524</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30521"></a>30521</td>
<td class="instruction">CP 96</td>
<td class="comment-11" rowspan="2">Set the carry flag if <span class="register">A</span>&gt;=96 (i.e. the pellet is in the tree)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30523"></a>30523</td>
<td class="instruction">CCF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30524"></a>30524</td>
<td class="instruction">JP NC,30391</td>
<td class="comment-11" rowspan="1">Jump unless the pellet will knock a conker out of the tree</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30527"></a>30527</td>
<td class="instruction">LD A,55</td>
<td class="comment-11" rowspan="1"><a class="link" href="../graphics/as.html#55">55</a>: animatory state of a conker</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30529"></a>30529</td>
<td class="instruction">JP 30418</td>
<td class="comment-11" rowspan="1">Transmute the pellet into a conker</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="30292.html">30292</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#30380">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="30532.html">30532</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Back to Skool RAM disassembly 20140614</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd (Back to Skool). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 4.0.</div>
</div>
</body>
</html>