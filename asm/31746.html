<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Back to Skool: Routine at 31746</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../microsphere.css" />
<link rel="stylesheet" type="text/css" href="../skool.css" />
<link rel="stylesheet" type="text/css" href="../bts.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="31733.html">31733</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#31746">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="31843.html">31843</a></span></td>
</tr>
</table>
<div class="description">31746: Print the inventory</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routines at <a class="link" href="23863.html">23863</a>, <a class="link" href="23907.html">23907</a>, <a class="link" href="30804.html">30804</a>, <a class="link" href="62178.html">62178</a> and <a class="link" href="63586.html">63586</a>. Prints the safe key, Science Lab storeroom key, frog, water pistol and stinkbombs, depending on which of these items ERIC has in his possession. (The mouse inventory is handled separately at <a class="link" href="31573.html#31682">31682</a>.)
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31746"></a>31746</td>
<td class="instruction">LD HL,32746</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=234 (LSB of the display file address for the first slot in the inventory: 20714)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31749"></a>31749</td>
<td class="instruction">LD C,6</td>
<td class="comment-11" rowspan="9">Clear the six slots in the current on-screen inventory</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31751"></a>31751</td>
<td class="instruction">LD H,80</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31753"></a>31753</td>
<td class="instruction">LD B,8</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31755"></a>31755</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31757"></a>31757</td>
<td class="instruction">INC H</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31758"></a>31758</td>
<td class="instruction">DJNZ 31755</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31760"></a>31760</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31761"></a>31761</td>
<td class="instruction">DEC C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31762"></a>31762</td>
<td class="instruction">JR NZ,31751</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31764"></a>31764</td>
<td class="instruction">LD DE,20714</td>
<td class="comment-11" rowspan="1"><span class="register">DE</span>=display file address for the first slot in the inventory</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31767"></a>31767</td>
<td class="instruction">LD BC,39144</td>
<td class="comment-11" rowspan="1">The safe key UDG is at <a class="link" href="39144.html">39144</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31770"></a>31770</td>
<td class="instruction">LD HL,32747</td>
<td class="comment-11" rowspan="1"><a class="link" href="32747.html">32747</a> holds the inventory flags</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31773"></a>31773</td>
<td class="instruction">LD A,6</td>
<td class="comment-11" rowspan="1">INK 6</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31775"></a>31775</td>
<td class="instruction">BIT 0,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got the safe key?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31777"></a>31777</td>
<td class="instruction">CALL NZ,<a class="link" href="31844.html">31844</a></td>
<td class="comment-11" rowspan="1">Print it if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31780"></a>31780</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="39400.html">39400</a>: Science Lab storeroom key UDG</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31781"></a>31781</td>
<td class="instruction">LD A,7</td>
<td class="comment-11" rowspan="1">INK 7</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31783"></a>31783</td>
<td class="instruction">BIT 1,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got the Science Lab storeroom key?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31785"></a>31785</td>
<td class="instruction">CALL NZ,<a class="link" href="31844.html">31844</a></td>
<td class="comment-11" rowspan="1">Print it if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31788"></a>31788</td>
<td class="instruction">LD A,4</td>
<td class="comment-11" rowspan="1">INK 4</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31790"></a>31790</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="39656.html">39656</a>: frog UDG</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31791"></a>31791</td>
<td class="instruction">BIT 2,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got the frog?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31793"></a>31793</td>
<td class="instruction">CALL NZ,<a class="link" href="31844.html">31844</a></td>
<td class="comment-11" rowspan="1">Print it if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31796"></a>31796</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="39912.html">39912</a>: water pistol UDG (left half)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31797"></a>31797</td>
<td class="instruction">BIT 3,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got the water pistol?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31799"></a>31799</td>
<td class="instruction">JR Z,31819</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31801"></a>31801</td>
<td class="instruction">LD A,5</td>
<td class="comment-11" rowspan="1">INK 5 for the water-filled pistol</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31803"></a>31803</td>
<td class="instruction">BIT 4,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got the water pistol with sherry in it?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31805"></a>31805</td>
<td class="instruction">JR Z,31809</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31807"></a>31807</td>
<td class="instruction">LD A,67</td>
<td class="comment-11" rowspan="1">INK 3: BRIGHT 1 for the sherry-filled pistol</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31809"></a>31809</td>
<td class="instruction">PUSH AF</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31810"></a>31810</td>
<td class="instruction">CALL <a class="link" href="31844.html">31844</a></td>
<td class="comment-11" rowspan="1">Print the left half of the water pistol</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31813"></a>31813</td>
<td class="instruction">POP AF</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31814"></a>31814</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="40168.html">40168</a>: water pistol UDG (right half)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31815"></a>31815</td>
<td class="instruction">CALL <a class="link" href="31844.html">31844</a></td>
<td class="comment-11" rowspan="1">Print the right half of the water pistol</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31818"></a>31818</td>
<td class="instruction">DEC B</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31819"></a>31819</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31820"></a>31820</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="40424.html">40424</a>: 3 stinkbombs UDG</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31821"></a>31821</td>
<td class="instruction">LD A,7</td>
<td class="comment-11" rowspan="1">INK 7</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31823"></a>31823</td>
<td class="instruction">BIT 5,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got 3 stinkbombs?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31825"></a>31825</td>
<td class="instruction">JR NZ,31837</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31827"></a>31827</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="40680.html">40680</a>: 2 stinkbombs UDG</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31828"></a>31828</td>
<td class="instruction">BIT 6,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got 2 stinkbombs?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31830"></a>31830</td>
<td class="instruction">JR NZ,31837</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31832"></a>31832</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-11" rowspan="1">Has ERIC got 1 stinkbomb?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31834"></a>31834</td>
<td class="instruction">JR Z,31840</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31836"></a>31836</td>
<td class="instruction">INC B</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=<a class="link" href="40936.html">40936</a>: 1 stinkbomb UDG</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31837"></a>31837</td>
<td class="instruction">CALL <a class="link" href="31844.html">31844</a></td>
<td class="comment-11" rowspan="1">Print the stinkbombs</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31840"></a>31840</td>
<td class="instruction">LD H,210</td>
<td class="comment-11" rowspan="1">210=ERIC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31842"></a>31842</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="31733.html">31733</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#31746">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="31843.html">31843</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Back to Skool RAM disassembly 20140614</div>
<div class="copyright">&#169; 1985 Microsphere Computer Services Ltd (Back to Skool). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 4.0.</div>
</div>
</body>
</html>